version: 1
default_environment: dev
project_id: olist_pipeline
plugins:
  extractors:
  - name: tap-csv
    variant: meltanolabs
    pip_url: git+https://github.com/MeltanoLabs/tap-csv.git
    config:
      files:
        - entity: raw_customers
          path: data/raw/olist_customers_dataset.csv
          keys: [customer_id]
        - entity: raw_geolocation
          path: data/raw/olist_geolocation_dataset.csv
          keys: [] 
        - entity: raw_order_items
          path: data/raw/olist_order_items_dataset.csv
          keys: [order_id, order_item_id]
        - entity: raw_payments
          path: data/raw/olist_order_payments_dataset.csv
          keys: [order_id, payment_sequential]
        - entity: raw_order_reviews
          path: data/raw/olist_order_reviews_dataset.csv
          keys: [review_id]
        - entity: raw_orders
          path: data/raw/olist_orders_dataset.csv
          keys: [order_id]
        - entity: raw_products
          path: data/raw/olist_products_dataset.csv
          keys: [product_id]
        - entity: raw_sellers
          path: data/raw/olist_sellers_dataset.csv
          keys: [seller_id]
        - entity: raw_product_category_name_translation
          path: data/raw/product_category_name_translation.csv
          keys: [product_category_name]
  loaders:
  - name: target-bigquery
    variant: z3
    pip_url: z3-target-bigquery
    config:
      project_id: $GCP_PROJECT
      dataset_id: olist_raw
      replication_method: FULL_TABLE
environments:
- name: dev
